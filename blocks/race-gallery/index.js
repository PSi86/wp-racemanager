(()=>{"use strict";var e={};const a=window.wp.blocks,t=window.wp.blockEditor,r=window.wp.components,l=window.wp.i18n,n=window.wp.element;(0,a.registerBlockType)("wp-racemanager/race-gallery",{title:(0,l.__)("Race Media Gallery","wp-racemanager"),icon:"images-alt2",category:"media",attributes:{mediaItems:{type:"array",default:[]}},edit({attributes:e,setAttributes:a}){const{mediaItems:i}=e,m=i.length>0,o=(0,t.useBlockProps)(),c=e=>{const t=Array.isArray(e)?e:e.toJSON();a({mediaItems:t.map((e=>({id:e.id,url:e.url,thumb:e.sizes?.medium?.url||e.sizes?.thumbnail?.url||e.url,alt:e.alt})))})};return React.createElement(n.Fragment,null,React.createElement("div",o,React.createElement("h2",{className:"rm-gallery-headline"},(0,l.__)("Gallery","wp-racemanager")),m?React.createElement(React.Fragment,null,React.createElement("div",{className:"rm-gallery-wrapper"},i.map((e=>React.createElement("div",{key:e.id,className:"rm-gallery-thumb"},React.createElement("img",{src:e.thumb,alt:e.alt||""}))))),React.createElement("div",{style:{marginTop:16}},React.createElement(r.Button,{isPrimary:!0,onClick:()=>{const e=(()=>{const e=i.map((e=>e.id));if(!e.length)return!1;const a=new wp.shortcode({tag:"gallery",attrs:{ids:e.join(",")},type:"single"}),t=wp.media.gallery.attachments(a),r=new wp.media.model.Selection(t.models,{props:t.props.toJSON(),multiple:!0});return r.gallery=t.gallery,r.more().done((()=>{r.props.set({query:!1}),r.unmirror(),r.props.unset("orderby")})),r})(),a={frame:"post",state:e?"gallery-edit":"gallery",multiple:!0,editing:!0,library:{type:["image","video"]},title:m?(0,l.__)("Edit Gallery or Add Media","wp-racemanager"):(0,l.__)("Select or Upload Media","wp-racemanager"),button:{text:(0,l.__)("Confirm","wp-racemanager")}};e&&(a.selection=e);const t=wp.media(a);t.on("update",c),t.open()}},(0,l.__)("Edit Gallery / Add Media","wp-racemanager")))):React.createElement(t.MediaPlaceholder,{icon:"images-alt2",labels:{title:(0,l.__)("Gallery","wp-racemanager"),instructions:(0,l.__)("Drag and drop images, upload, or choose from your library.","wp-racemanager")},onSelect:c,allowedTypes:["image","video"],accept:"image/*,video/*",multiple:"add",gallery:!0}),React.createElement("style",null,"\n            .rm-gallery-wrapper {\n              display: flex;\n              flex-wrap: wrap;\n              gap: 10px;\n            }\n            .rm-gallery-thumb img {\n              width: 150px;\n              height: 150px;\n              object-fit: cover;\n              border-radius: 3px;\n            }\n          ")))},save:()=>null});var i=window;for(var m in e)i[m]=e[m];e.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();